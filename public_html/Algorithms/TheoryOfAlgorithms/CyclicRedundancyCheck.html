<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Cyclic redundancy check</title>
<!-- 2017-05-10 Wed 23:34 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Shi Shougang" />
<link href="../../assets/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="../../assets/bootstrap-responsive.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="../../assets/stylesheet.css" />
<script src="assets/js/bootstrap.min.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Cyclic redundancy check</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Overview</a></li>
<li><a href="#sec-2">The Basic Idea Behind CRC Algorithms</a></li>
<li><a href="#sec-3">Binary Arithmetic with No Carries</a></li>
<li><a href="#sec-4">Choosing A Poly</a></li>
<li><a href="#sec-5">A Straightforward CRC Implementation</a></li>
<li><a href="#sec-6">A Table-Driven Implementation</a></li>
<li><a href="#sec-7">cc</a></li>
</ul>
</div>
</div>


<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Overview</h2>
<div class="outline-text-2" id="text-1">
<p>
Cyclic Redundancy Check循环冗余检验，是基于数据计算一组效验码，用于核对数据传输过程中是否被更改或传输错误。
</p>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">The Basic Idea Behind CRC Algorithms</h2>
<div class="outline-text-2" id="text-2">
<p>
The basic idea of CRC algorithms is simply to treat the message as an
enormous binary number, to divide it by another fixed binary number,
and to make the remainder from this division the checksum. Upon
receipt of the message, the receiver can perform the same division and
compare the remainder with the "checksum" (transmitted remainder).
</p>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">Binary Arithmetic with No Carries</h2>
<div class="outline-text-2" id="text-3">
<p>
Adding two numbers in CRC arithmetic is the same as adding numbers in
ordinary binary arithmetic except there is no carry. This means that
each pair of corresponding bits determine the corresponding output bit
without reference to any other bit positions. For example:
</p>

<div class="org-src-container">

<pre class="src src-sh"> 10011011
+11001010
 --------
 01010001
 --------
</pre>
</div>
<p>
There are only four cases for each bit position:
</p>

<div class="org-src-container">

<pre class="src src-sh">   0+<span style="color: #eedd82;">0</span>=0
   0+<span style="color: #eedd82;">1</span>=1
   1+<span style="color: #eedd82;">0</span>=1
   1+<span style="color: #eedd82;">1</span>=0  (no carry)
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">Subtraction is identical:</span>
        10011011
       -11001010
        --------
        01010001
        --------
</pre>
</div>

<p>
In fact, both addition and subtraction in CRC arithmetic is equivalent
to the XOR operation, and the XOR operation is its own inverse. 
</p>

<p>
Here's a fully worked division:
</p>
<div class="org-src-container">

<pre class="src src-sh">            1100001010
       _______________
10011 ) 11010110110000
        10011,,.,,....
        -----,,.,,....
         10011,.,,....
         10011,.,,....
         -----,.,,....
          00001.,,....
          00000.,,....
          -----.,,....
           00010,,....
           00000,,....
           -----,,....
            00101,....
            00000,....
            -----,....
             01011....
             00000....
             -----....
              10110...
              10011...
              -----...
               01010..
               00000..
               -----..
                10100.
                10011.
                -----.
                 01110
                 00000
                 -----
                  <span style="color: #eedd82;">1110</span> = Remainder
</pre>
</div>

<p>
Thus we see that CRC arithmetic is primarily about XORing particular
values at various shifting offsets.
</p>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">Choosing A Poly</h2>
<div class="outline-text-2" id="text-4">
<p>
Choosing a poly is somewhat of a black art and the reader is referred
to<sup><a id="fnr.1" name="fnr.1" class="footref" href="#fn.1">1</a></sup> (p.130-132) which has a very clear discussion of this issue. 
</p>

<p>
Some popular polys are:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">name</th>
<th scope="col" class="left">Polys</th>
<th scope="col" class="right">Hex</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">CRC12</td>
<td class="left">x<sup>12</sup> + x<sup>11</sup> + x<sup>3</sup> + x<sup>2</sup> + x + 1</td>
<td class="right">0x80F</td>
</tr>

<tr>
<td class="left">CRC16</td>
<td class="left">x<sup>16</sup> + x<sup>15</sup> + x<sup>2</sup> + 1</td>
<td class="right">0x8005</td>
</tr>

<tr>
<td class="left">CRC16-CCITT</td>
<td class="left">x<sup>16</sup> + x<sup>12</sup> + x<sup>5</sup> + 1</td>
<td class="right">0x1021</td>
</tr>

<tr>
<td class="left">CRC32</td>
<td class="left">x<sup>32</sup> + x<sup>26</sup> + x<sup>23</sup> + x<sup>22</sup> + x<sup>16</sup> + x<sup>12</sup> +</td>
<td class="right">0x04C11DB7</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">x<sup>11</sup>+ x<sup>10</sup> + x<sup>8</sup> + x<sup>7</sup> + x<sup>5</sup> + x<sup>4</sup> + x<sup>2</sup> + x + 1</td>
<td class="right">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">A Straightforward CRC Implementation</h2>
<div class="outline-text-2" id="text-5">
<div class="org-src-container">

<pre class="src src-sh">           3   2   1   0   Bits
         +---+---+---+---+
Pop! &lt;-- |   |   |   |   | &lt;----- Augmented message
         +---+---+---+---+
      1    0   1   1   <span style="color: #eedd82;">1</span>   = The Poly
</pre>
</div>
<p>
To perform the division perform the following:
</p>

<div class="org-src-container">

<pre class="src src-sh">Load the register with zero bits.
Augment the message by appending W zero bits to the end of it.
<span style="color: #87cefa;">While</span> (more message bits)
   Begin
   Shift the register left by one bit, reading the next bit of the
      augmented message into register bit position 0.
   If (a 1 bit popped out of the register during step 3)
      <span style="color: #eedd82;">Register</span> = Register XOR Poly.
   End
The register now contains the remainder.
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">A Table-Driven Implementation</h2>
<div class="outline-text-2" id="text-6">
<p>
The straightforward method operates at the bit level, it is rather awkward
to code (even in C), and inefficient to execute (it has to loop once
for each bit). To speed it up, we need to find a way to enable the
algorithm to process the message in units larger than one bit.
</p>

<p>
For the purposes of discussion, let us switch from a 4-bit poly to a
32-bit one. Our register looks much the same, except the boxes
represent bytes instead of bits, and the Poly is 33 bits (one implicit
1 bit at the top and 32 "active" bits) (W=32).
</p>

<div class="org-src-container">

<pre class="src src-sh">            3    2    1    0   Bytes
         +----+----+----+----+
Pop! &lt;-- |    |    |    |    | &lt;----- Augmented message
         +----+----+----+----+
        1&lt;------32 bits------&gt;
</pre>
</div>

<div class="org-src-container">

<pre class="src src-sh"></pre>
</div>
</div>
</div>



<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7">cc</h2>
<div class="outline-text-2" id="text-7">
<div class="org-src-container">

<pre class="src src-sh"></pre>
</div>

<div class="org-src-container">

<pre class="src src-c++"></pre>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" name="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p class="footpara">
Tanenbaum, A.S., "Computer Networks", Prentice Hall, 1981, ISBN: 0-13-164699-0. Comment: Section 3.5.3 on pages 128 to 132 provides a very clear description of CRC codes. However, it does not describe table-driven implementation techniques.
</p></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: Shi Shougang</p>
<p class="date">Created: 2017-05-10 Wed 23:34</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
