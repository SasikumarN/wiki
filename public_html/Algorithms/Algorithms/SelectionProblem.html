<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Selection Problem</title>
<!-- 2017-04-16 Sun 23:17 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Shi Shougang" />
<link href="../../assets/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="../../assets/bootstrap-responsive.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="../../assets/stylesheet.css" />
<script src="assets/js/bootstrap.min.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Selection Problem</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Kth Smallest/Largest Element in Unsorted Array</a>
<ul>
<li><a href="#sec-1-1">Method 1 (Simple Solution)</a></li>
<li><a href="#sec-1-2">Method 2 (Using Min Heap – HeapSelect)</a></li>
<li><a href="#sec-1-3">Method 3 (Using Max-Heap)</a></li>
<li><a href="#sec-1-4">Method 4 (QuickSelect)</a></li>
<li><a href="#sec-1-5">Method 5 (Divide, Sort and find)</a></li>
</ul>
</li>
<li><a href="#sec-2">kth Smallest Element in the Union of Two Sorted Arrays</a></li>
<li><a href="#sec-3">Median of two sorted arrays</a></li>
<li><a href="#sec-4">Median of two sorted arrays of different sizes</a></li>
<li><a href="#sec-5">Random Selection</a></li>
<li><a href="#sec-6">BFPRT</a></li>
<li><a href="#sec-7">Tournament Algorithm</a>
<ul>
<li><a href="#sec-7-1">Find the second-largest element</a></li>
<li><a href="#sec-7-2">Find the k-largest element</a></li>
</ul>
</li>
<li><a href="#sec-8">cc</a></li>
</ul>
</div>
</div>



<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Kth Smallest/Largest Element in Unsorted Array</h2>
<div class="outline-text-2" id="text-1">
<p>
Given an array and a number k where k is smaller than size of array,
we need to find the k’th smallest element in the given array. It is
given that array elements are distinct.
</p>
</div>

<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1">Method 1 (Simple Solution)</h3>
<div class="outline-text-3" id="text-1-1">
<p>
A Simple Solution is to sort the given array using a O(nlogn) sorting
algorithm like Merge Sort, Heap Sort, etc and return the element at
index k-1 in the sorted array. Time Complexity of this solution is
O(nLogn).
</p>

<p>
<a href="./Files/kth_smallest1.cc">./Files/kth_smallest1.cc</a>
</p>

<div class="org-src-container">

<pre class="src src-c++"><span style="color: #b0c4de;">#include</span><span style="color: #ffa07a;">&lt;iostream&gt;</span>
<span style="color: #b0c4de;">#include</span><span style="color: #ffa07a;">&lt;algorithm&gt;</span>
<span style="color: #00ffff;">using</span> <span style="color: #00ffff;">namespace</span> <span style="color: #7fffd4;">std</span>;

<span style="color: #98fb98;">int</span> <span style="color: #87cefa;">kthSmallest</span>(<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">arr</span>[], <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">n</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">k</span>) {
  sort(arr, arr+n);
  <span style="color: #00ffff;">return</span> arr[k-1];
}

<span style="color: #98fb98;">int</span> <span style="color: #87cefa;">main</span>() {
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">arr</span>[] = {12, 3, 5, 7, 19};
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">n</span> = <span style="color: #00ffff;">sizeof</span>(arr) / <span style="color: #00ffff;">sizeof</span>(arr[0]);
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">k</span> = 2;
  cout &lt;&lt; <span style="color: #ffa07a;">"K'th smallest element is "</span> &lt;&lt;  kthSmallest(arr, n, k);
  <span style="color: #00ffff;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2">Method 2 (Using Min Heap – HeapSelect)</h3>
<div class="outline-text-3" id="text-1-2">
<p>
We can find k’th smallest element in time complexity better than
O(nLogn). A simple optomization is to create a Min Heap of the given n
elements and call extractMin() k times. Time complexity of this
solution is O(n + kLogn).
</p>

<p>
<a href="./Files/kth_smallest2.cc">./Files/kth_smallest2.cc</a>
</p>

<div class="org-src-container">

<pre class="src src-c++"><span style="color: #b0c4de;">#include</span><span style="color: #ffa07a;">&lt;iostream&gt;</span>
<span style="color: #b0c4de;">#include</span><span style="color: #ffa07a;">&lt;climits&gt;</span>
<span style="color: #00ffff;">using</span> <span style="color: #00ffff;">namespace</span> <span style="color: #7fffd4;">std</span>;

<span style="color: #98fb98;">void</span> <span style="color: #87cefa;">swap</span>(<span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">x</span>, <span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">y</span>) {
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">temp</span> = *x;
  *x = *y;
  *y = temp;
}

<span style="color: #00ffff;">class</span> <span style="color: #98fb98;">MinHeap</span> {
 <span style="color: #00ffff;">public</span>:
  <span style="color: #87cefa;">MinHeap</span>(<span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">a</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">size</span>);
  <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">MinHeapify</span>(<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span>); <span style="color: #ff7f24;">//</span><span style="color: #ff7f24;">To minheapify subtree rooted with index i</span>
  <span style="color: #98fb98;">int</span> <span style="color: #87cefa;">Parent</span>(<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span>) {
    <span style="color: #00ffff;">return</span> (i - 1) / 2;
  }
  <span style="color: #98fb98;">int</span> <span style="color: #87cefa;">Left</span>(<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span>) {
    <span style="color: #00ffff;">return</span> (2 * i + 1);
  }
  <span style="color: #98fb98;">int</span> <span style="color: #87cefa;">Right</span>(<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span>) {
    <span style="color: #00ffff;">return</span> (2 * i + 2);
  }
  <span style="color: #98fb98;">int</span> <span style="color: #87cefa;">ExtractMin</span>();
  <span style="color: #98fb98;">int</span> <span style="color: #87cefa;">GetMin</span>() {
    <span style="color: #00ffff;">return</span> harr[0];
  }

 <span style="color: #00ffff;">private</span>:
  <span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">harr</span>;
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">heap_size</span>;
};

<span style="color: #7fffd4;">MinHeap</span>::<span style="color: #87cefa;">MinHeap</span>(<span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">a</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">size</span>) {
  heap_size = size;
  harr = a;
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span> = (heap_size - 1)/2;
  <span style="color: #00ffff;">while</span> (i &gt;= 0) {
    MinHeapify(i);
    i--;
  }
}

<span style="color: #98fb98;">void</span> <span style="color: #7fffd4;">MinHeap</span>::<span style="color: #87cefa;">MinHeapify</span>(<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span>) {
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">l</span> = Left(i);
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">r</span> = Right(i);
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">smallest</span> = i;
  <span style="color: #00ffff;">if</span> (l &lt; heap_size &amp;&amp; harr[l] &lt; harr[i]) {
    smallest = l;
  }
  <span style="color: #00ffff;">if</span> (r &lt; heap_size &amp;&amp; harr[r] &lt; harr[smallest]) {
    smallest = r;
  }
  <span style="color: #00ffff;">if</span> (smallest != i) {
    swap(&amp;harr[i], &amp;harr[smallest]);
    MinHeapify(smallest);
  }
}

<span style="color: #98fb98;">int</span> <span style="color: #7fffd4;">MinHeap</span>::<span style="color: #87cefa;">ExtractMin</span>() {
  <span style="color: #00ffff;">if</span> (heap_size == 0) {
    <span style="color: #00ffff;">return</span> INT_MAX;
  }
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">root</span> = harr[0];
  <span style="color: #00ffff;">if</span> (heap_size &gt; 1) {
    harr[0] = harr[heap_size-1];
    MinHeapify(0);
  }
  heap_size--;
  <span style="color: #00ffff;">return</span> root;
}

<span style="color: #98fb98;">int</span> <span style="color: #87cefa;">KthSmallest</span>(<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">arr</span>[], <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">n</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">k</span>) {
  <span style="color: #98fb98;">MinHeap</span> <span style="color: #eedd82;">mh</span>(arr, n);
  <span style="color: #00ffff;">for</span> (<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span>=0; i&lt;k-1; i++) {
    mh.ExtractMin();
  }
  <span style="color: #00ffff;">return</span> mh.GetMin();
}

<span style="color: #98fb98;">int</span> <span style="color: #87cefa;">main</span>() {
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">arr</span>[] = {12, 3, 5, 7, 19};
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">n</span> = <span style="color: #00ffff;">sizeof</span>(arr) / <span style="color: #00ffff;">sizeof</span>(arr[0]), <span style="color: #eedd82;">k</span> = 2;
  cout &lt;&lt; <span style="color: #ffa07a;">"K'th smallest element is "</span> &lt;&lt; KthSmallest(arr, n, k);
  <span style="color: #00ffff;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3">Method 3 (Using Max-Heap)</h3>
<div class="outline-text-3" id="text-1-3">
<ol class="org-ol">
<li>Build a Max-Heap MH of the first k elements (<code>arr[0]</code> to <code>arr[k-1]</code>) of
the given array. O(k)
</li>

<li>For each element, after the k’th element (<code>arr[k]</code> to <code>arr[n-1]</code>),
compare it with root of MH.
</li>
</ol>
<p>
Time complexity of this solution is O(k + (n-k)*Logk)
</p>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4">Method 4 (QuickSelect)</h3>
<div class="outline-text-3" id="text-1-4">
<p>
In QuickSort, we pick a pivot element, then move the pivot element to
its correct position and partition the array around it. The idea is,
not to do complete quicksort, but stop at the point where pivot itself
is k’th smallest element. Also, not to recur for both left and right
sides of pivot, but recur for one of them according to the position of
pivot. The worst case time complexity of this method is O(n2), but it
works in O(n) on average.
</p>

<p>
<a href="./Files/kth_smallest4.cc">./Files/kth_smallest4.cc</a>
</p>

<div class="org-src-container">

<pre class="src src-c++"><span style="color: #b0c4de;">#include</span><span style="color: #ffa07a;">&lt;iostream&gt;</span>
<span style="color: #b0c4de;">#include</span><span style="color: #ffa07a;">&lt;climits&gt;</span>

<span style="color: #00ffff;">using</span> <span style="color: #00ffff;">namespace</span> <span style="color: #7fffd4;">std</span>;

<span style="color: #98fb98;">void</span> <span style="color: #87cefa;">swap</span>(<span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">a</span>, <span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">b</span>) {
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">temp</span> = *a;
  *a = *b;
  *b = temp;
}

<span style="color: #98fb98;">int</span> <span style="color: #87cefa;">Partition</span>(<span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">arr</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">l</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">r</span>) {
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">x</span> = arr[r], <span style="color: #eedd82;">i</span> = l;
  <span style="color: #00ffff;">for</span> (<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">j</span> = l; j &lt; r; ++j) {
    <span style="color: #00ffff;">if</span> (arr[j] &lt;= x) {
      swap(&amp;arr[i], &amp;arr[j]);
      ++i;
    }
  }
  swap(&amp;arr[i], &amp;arr[r]);
  <span style="color: #00ffff;">return</span> i;
}

<span style="color: #98fb98;">int</span> <span style="color: #87cefa;">KthSmallest</span>(<span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">arr</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">l</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">r</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">k</span>) {
  <span style="color: #00ffff;">if</span> (k &gt; 0 &amp;&amp; k &lt;= r - l + 1) {
    <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">pos</span> = Partition(arr, l, r);
    <span style="color: #00ffff;">if</span> (pos - l == k - 1) {
      <span style="color: #00ffff;">return</span> arr[pos];
    }
    <span style="color: #00ffff;">if</span> (pos - l &gt; k - 1) {
      <span style="color: #00ffff;">return</span> KthSmallest(arr, l, pos-1, k);
    }
    <span style="color: #00ffff;">return</span> KthSmallest(arr, pos+1, r, k - (pos - l + 1));
  }
  <span style="color: #00ffff;">return</span> INT_MAX;
}

<span style="color: #98fb98;">int</span> <span style="color: #87cefa;">main</span>() {
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">arr</span>[] = {12, 3, 5, 7, 4, 19, 26};
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">n</span> = <span style="color: #00ffff;">sizeof</span>(arr)/<span style="color: #00ffff;">sizeof</span>(arr[0]), <span style="color: #eedd82;">k</span> = 3;
  cout &lt;&lt; <span style="color: #ffa07a;">"K'th smallest element is "</span> &lt;&lt; KthSmallest(arr, 0, n-1, k);
  <span style="color: #00ffff;">return</span> 0;
}
</pre>
</div>
</div>

<ul class="org-ul"><li><a id="sec-1-4-1" name="sec-1-4-1"></a>picks a random pivot element<br  /><div class="outline-text-4" id="text-1-4-1">
<div class="org-src-container">

<pre class="src src-c++"><span style="color: #98fb98;">int</span> <span style="color: #87cefa;">randomPartition</span>(<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">arr</span>[], <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">l</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">r</span>)
{
    <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">n</span> = r-l+1;
    <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">pivot</span> = rand() % n;
    swap(&amp;arr[l + pivot], &amp;arr[r]);
    <span style="color: #00ffff;">return</span> partition(arr, l, r);
}
</pre>
</div>
</div>
</li></ul>
</div>
<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5">Method 5 (Divide, Sort and find)</h3>
<div class="outline-text-3" id="text-1-5">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #87cefa;">kthSmallest</span>(arr[0..n-1], k)

1) Divide arr[] into &#8968;n/5&#8969; ceil; groups where size of each group is 5 
   except possibly the last group which may have less  than 5 elements.  

2) Sort the above created &#8968;n/5&#8969; groups and find median 
   of all groups. Create an auxiliary array <span style="color: #ffa07a;">'median[]'</span> and store medians 
   of all &#8968;n/5&#8969; groups<span style="color: #00ffff;"> in</span> this median array.

// Recursively call this method to find median of median[0..&#8968;n/5&#8969;-1]
3) <span style="color: #eedd82;">medOfMed</span> = kthSmallest(median[0..&#8968;n/5&#8969;-1], &#8968;n/10&#8969;)

4) Partition arr[] around medOfMed and obtain its position.
     <span style="color: #eedd82;">pos</span> = partition(arr, n, medOfMed)

5) If <span style="color: #eedd82;">pos</span> == k return medOfMed 
6) If pos &lt; k return kthSmallest(arr[l..pos-1], k) 
7) If poa &gt; k return kthSmallest(arr[pos+1..r], k-pos+l-1)
</pre>
</div>

<p>
More: <a href="http://www.geeksforgeeks.org/kth-smallestlargest-element-unsorted-array-set-3-worst-case-linear-time/">Worst Case Linear Time</a>
</p>

<p>
<a href="./Files/kth_smallest5.cc">./Files/kth_smallest5.cc</a>
</p>

<div class="org-src-container">

<pre class="src src-c++"><span style="color: #b0c4de;">#include</span><span style="color: #ffa07a;">&lt;iostream&gt;</span>
<span style="color: #b0c4de;">#include</span><span style="color: #ffa07a;">&lt;algorithm&gt;</span>
<span style="color: #b0c4de;">#include</span><span style="color: #ffa07a;">&lt;climits&gt;</span>

<span style="color: #00ffff;">using</span> <span style="color: #00ffff;">namespace</span> <span style="color: #7fffd4;">std</span>;

<span style="color: #98fb98;">void</span> <span style="color: #87cefa;">swap</span>(<span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">a</span>, <span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">b</span>) {
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">temp</span> = *a;
  *a = *b;
  *b = temp;
}

<span style="color: #98fb98;">int</span> <span style="color: #87cefa;">FindMedian</span>(<span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">arr</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">n</span>) {
  sort(arr, arr + n);
  <span style="color: #00ffff;">return</span> arr[n/2];
}

<span style="color: #98fb98;">int</span> <span style="color: #87cefa;">Partition</span>(<span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">arr</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">l</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">r</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">x</span>) {
  <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Search for x in arr[l..r] and move it to end</span>
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span>;
  <span style="color: #00ffff;">for</span> (i = l; i &lt; r; ++i) {
    <span style="color: #00ffff;">if</span> (arr[i] == x) {
      <span style="color: #00ffff;">break</span>;
    }
  }
  swap(&amp;arr[i], &amp;arr[r]);
  i = l;
  <span style="color: #00ffff;">for</span> (<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">j</span> = l; j &lt; r; ++j) {
    <span style="color: #00ffff;">if</span> (arr[j] &lt;= x) {
      swap(&amp;arr[i], &amp;arr[j]);
      ++i;
    }
  }
  swap(&amp;arr[i], &amp;arr[r]);
  <span style="color: #00ffff;">return</span> i;
}

<span style="color: #98fb98;">int</span> <span style="color: #87cefa;">KthSmallest</span>(<span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">arr</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">l</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">r</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">k</span>) {
  <span style="color: #00ffff;">if</span> (k &gt; 0 &amp;&amp; k &lt;= r - l + 1) {
    <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">n</span> = r - l + 1;
    <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span>, <span style="color: #eedd82;">median</span>[(n+4)/5];
    <span style="color: #00ffff;">for</span> (i = 0; i &lt; n / 5; ++i) {
      median[i] = FindMedian(arr + l + i * 5, 5);
    }
    <span style="color: #00ffff;">if</span> (i * 5 &lt; n) {
      median[i] = FindMedian(arr + l + i * 5, n % 5);
      ++i;
    }
    <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">med_of_med</span> = (i == 1) ? median[i-1] :
                     KthSmallest(median, 0, i - 1, i / 2);
    <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">pos</span> = Partition(arr, l, r, med_of_med);
    <span style="color: #00ffff;">if</span> (pos-l == k-1) {
      <span style="color: #00ffff;">return</span> arr[pos];
    }
    <span style="color: #00ffff;">if</span> (pos-l &gt; k-1) {
      <span style="color: #00ffff;">return</span> KthSmallest(arr, l, pos-1, k);
    }
    <span style="color: #00ffff;">return</span> KthSmallest(arr, pos+1, r, k-pos+l-1);
  }
  <span style="color: #00ffff;">return</span> INT_MAX;
}

<span style="color: #98fb98;">int</span> <span style="color: #87cefa;">main</span>() {
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">arr</span>[] = {12, 3, 5, 7, 4, 19, 26};
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">n</span> = <span style="color: #00ffff;">sizeof</span>(arr) / <span style="color: #00ffff;">sizeof</span>(arr[0]);
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">k</span> = 3;
  cout &lt;&lt; <span style="color: #ffa07a;">"K'th smallest element is "</span>
       &lt;&lt; KthSmallest(arr, 0, n-1, k);
  <span style="color: #00ffff;">return</span> 0;
}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">kth Smallest Element in the Union of Two Sorted Arrays</h2>
</div>



<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">Median of two sorted arrays</h2>
<div class="outline-text-2" id="text-3">
<p>
This method works by first getting medians of the two sorted arrays
and then comparing them.
</p>

<p>
Time Complexity: O(logn)
</p>

<div class="org-src-container">

<pre class="src src-sh">1) Calculate the medians m1 and m2 of the input arrays ar1[] 
   and ar2[] respectively.
2) If m1 and m2 both are equal then we are done.
     <span style="color: #00ffff;">return</span> m1 (or m2)
3) If m1 is greater than m2, then median is present<span style="color: #00ffff;"> in</span> one 
   of the below two subarrays.
    a)  From first element of ar1 to m1 (ar1[0...|_n/2_|])
    b)  From m2 to last element of ar2  (ar2[|_n/2_|...n-1])
4) If m2 is greater than m1, then median is present<span style="color: #00ffff;"> in</span> one    
   of the below two subarrays.
   a)  From m1 to last element of ar1  (ar1[|_n/2_|...n-1])
   b)  From first element of ar2 to m2 (ar2[0...|_n/2_|])
5) Repeat the above process until size of both the subarrays 
   becomes 2.
6) If size of the two arrays is 2 then use below formula to get 
  the median.
    <span style="color: #eedd82;">Median</span> = (max(ar1[0], ar2[0]) + min(ar1[1], ar2[1]))/2
</pre>
</div>

<p>
<a href="./Files/med_two_sorted_arrays.cc">./Files/med_two_sorted_arrays.cc</a>
</p>

<div class="org-src-container">

<pre class="src src-c++"><span style="color: #b0c4de;">#include</span> <span style="color: #ffa07a;">&lt;iostream&gt;</span>

<span style="color: #00ffff;">using</span> <span style="color: #00ffff;">namespace</span> <span style="color: #7fffd4;">std</span>;

<span style="color: #98fb98;">int</span> <span style="color: #87cefa;">Median</span>(<span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">arr</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">n</span>) {
  <span style="color: #00ffff;">if</span> (n % 2 == 0) {
    <span style="color: #00ffff;">return</span> (arr[n/2-1] + arr[n/2]) / 2;
  }
  <span style="color: #00ffff;">return</span> arr[n/2];
}

<span style="color: #98fb98;">int</span> <span style="color: #87cefa;">GetMedian</span>(<span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">arr1</span>, <span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">arr2</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">n</span>) {
  <span style="color: #00ffff;">if</span> (n &lt;= 0) {
    <span style="color: #00ffff;">return</span> -1;
  }
  <span style="color: #00ffff;">if</span> (n == 1) {
    <span style="color: #00ffff;">return</span> (arr1[0] + arr2[0]) / 2;
  }
  <span style="color: #00ffff;">if</span> (n == 2) {
    <span style="color: #00ffff;">return</span> (max(arr1[0] , arr2[0]) + min(arr1[1], arr2[1])) / 2;
  }
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">m1</span> = Median(arr1, n);
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">m2</span> = Median(arr2, n);
  <span style="color: #00ffff;">if</span> (m1 == m2) {
    <span style="color: #00ffff;">return</span> (m1 + m2) / 2;
  }
  <span style="color: #00ffff;">if</span> (m1 &lt; m2) {
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">in arr1[m1, n] and arr2[0, m2]</span>
    <span style="color: #00ffff;">if</span> (n % 2 == 0) {
      <span style="color: #00ffff;">return</span> GetMedian(arr1 + n/2-1, arr2, n - n/2 + 1);
    }
    <span style="color: #00ffff;">return</span> GetMedian(arr1 + n/2, arr2, n - n/2);
  }
  <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">m1 &gt; m2: arr1[0, m1] and arr2[m2, n]</span>
  <span style="color: #00ffff;">if</span> (n % 2 == 0) {
    <span style="color: #00ffff;">return</span> GetMedian(arr1, arr2 + n/2-1, n - n/2 + 1);
  }
  <span style="color: #00ffff;">return</span> GetMedian(arr1, arr2 + n/2, n - n/2);
}

<span style="color: #98fb98;">int</span> <span style="color: #87cefa;">main</span>() {
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">ar1</span>[] = {1, 2, 3, 6};
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">ar2</span>[] = {4, 6, 8, 10};
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">n1</span> = <span style="color: #00ffff;">sizeof</span>(ar1) / <span style="color: #00ffff;">sizeof</span>(ar1[0]);
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">n2</span> = <span style="color: #00ffff;">sizeof</span>(ar2) / <span style="color: #00ffff;">sizeof</span>(ar2[0]);
  <span style="color: #00ffff;">if</span> (n1 == n2) {
    cout &lt;&lt; <span style="color: #ffa07a;">"Median is "</span> &lt;&lt; GetMedian(ar1, ar2, n1) &lt;&lt; endl;
  } <span style="color: #00ffff;">else</span>
    cout &lt;&lt; <span style="color: #ffa07a;">"Doesn't work for arrays of unequal size"</span> &lt;&lt; endl;
  <span style="color: #00ffff;">return</span> 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">Median of two sorted arrays of different sizes</h2>
<div class="outline-text-2" id="text-4">
<p>
Let the two arrays be A[N] and B[M]. In the following explanation, it
is assumed that N is smaller than or equal to M.
</p>

<p>
Base cases:
</p>
<div class="org-src-container">

<pre class="src src-sh">The smaller array has only one element
Case 0: <span style="color: #eedd82;">N</span> = 0, <span style="color: #eedd82;">M</span> = 2
Case 1: <span style="color: #eedd82;">N</span> = 1, <span style="color: #eedd82;">M</span> = 1.
Case 2: <span style="color: #eedd82;">N</span> = 1, M is odd
Case 3: <span style="color: #eedd82;">N</span> = 1, M is even
The smaller array has only two elements
Case 4: <span style="color: #eedd82;">N</span> = 2, <span style="color: #eedd82;">M</span> = 2
Case 5: <span style="color: #eedd82;">N</span> = 2, M is odd
Case 6: <span style="color: #eedd82;">N</span> = 2, M is even
</pre>
</div>

<div class="org-src-container">

<pre class="src src-sh">Case 0: There are no elements<span style="color: #00ffff;"> in</span> first array, return median of second array. If second array is also empty, return -1.

Case 1: There is only one element<span style="color: #00ffff;"> in</span> both arrays, so output the average of A[0] and B[0].

Case 2: <span style="color: #eedd82;">N</span> = 1, M is odd
Let <span style="color: #eedd82;">B</span>[5] = {5, 10, 12, 15, 20}
First find the middle element of B[], which is 12 for above array. There are following 4 sub-cases.
&#8230;2.1 If A[0] is smaller than 10, the median is average of 10 and 12.
&#8230;2.2 If A[0] lies between 10 and 12, the median is average of A[0] and 12.
&#8230;2.3 If A[0] lies between 12 and 15, the median is average of 12 and A[0].
&#8230;2.4 If A[0] is greater than 15, the median is average of 12 and 15.
In all the sub-cases, we find that 12 is fixed. So, we need to find the median of B[ M / 2 &#8211; 1 ], B[ M / 2 + 1], A[ 0 ] and take its average with B[ M / 2 ].

Case 3: <span style="color: #eedd82;">N</span> = 1, M is even
Let <span style="color: #eedd82;">B</span>[4] = {5, 10, 12, 15}
First find the middle items<span style="color: #00ffff;"> in</span> B[], which are 10 and 12<span style="color: #00ffff;"> in</span> above example. There are following 3 sub-cases.
&#8230;3.1 If A[0] is smaller than 10, the median is 10.
&#8230;3.2 If A[0] lies between 10 and 12, the median is A[0].
&#8230;3.3 If A[0] is greater than 12, the median is 12.
So,<span style="color: #00ffff;"> in</span> this case, find the median of three elements B[ M / 2 &#8211; 1 ], B[ M / 2] and A[ 0 ].

Case 4: <span style="color: #eedd82;">N</span> = 2, <span style="color: #eedd82;">M</span> = 2
There are four elements<span style="color: #00ffff;"> in</span> total. So we find the median of 4 elements.

Case 5: <span style="color: #eedd82;">N</span> = 2, M is odd
Let <span style="color: #eedd82;">B</span>[5] = {5, 10, 12, 15, 20}
The median is given by median of following three elements: B[M/2], max(A[0], B[M/2 &#8211; 1]), min(A[1], B[M/2 + 1]).

Case 6: <span style="color: #eedd82;">N</span> = 2, M is even
Let <span style="color: #eedd82;">B</span>[4] = {5, 10, 12, 15}
The median is given by median of following four elements: B[M/2], B[M/2 &#8211; 1], max(A[0], B[M/2 &#8211; 2]), min(A[1], B[M/2 + 1])
</pre>
</div>

<p>
<a href="./Files/med_two_sorted_arrays_diff.cc">./Files/med_two_sorted_arrays_diff.cc</a>
</p>

<div class="org-src-container">

<pre class="src src-c++"><span style="color: #b0c4de;">#include</span> <span style="color: #ffa07a;">&lt;iostream&gt;</span>

<span style="color: #00ffff;">using</span> <span style="color: #00ffff;">namespace</span> <span style="color: #7fffd4;">std</span>;

<span style="color: #98fb98;">float</span> <span style="color: #87cefa;">MedianOf2</span>(<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">a</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">b</span>) {
  <span style="color: #00ffff;">return</span> (a + b) / 2.0;
}

<span style="color: #98fb98;">float</span> <span style="color: #87cefa;">MedianOf3</span>(<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">a</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">b</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">c</span>) {
  <span style="color: #00ffff;">return</span> a + b + c -
      max(a, max(b, c)) -
      min(a, min(b, c));
}

<span style="color: #98fb98;">float</span> <span style="color: #87cefa;">MedianOf4</span>(<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">a</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">b</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">c</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">d</span>) {
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">max_num</span> = max(a, max(b, max(c, d)));
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">min_num</span> = min(a, min(b, min(c, d)));
  <span style="color: #00ffff;">return</span> (a + b + c + d - max_num - min_num) / 2.0;
}

<span style="color: #98fb98;">float</span> <span style="color: #87cefa;">MedianSingle</span>(<span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">arr</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">n</span>) {
  <span style="color: #00ffff;">if</span> (n == 0) {
    <span style="color: #00ffff;">return</span> -1;
  } <span style="color: #00ffff;">else</span> <span style="color: #00ffff;">if</span> (n % 2 == 0) {
    <span style="color: #00ffff;">return</span> (arr[n/2-1] + arr[n/2]) / 2.0;
  }
  <span style="color: #00ffff;">return</span> arr[n/2];
}

<span style="color: #98fb98;">float</span> <span style="color: #87cefa;">FindMedianUtil</span>(<span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">a</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">n</span>, <span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">b</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">m</span>) {
  <span style="color: #00ffff;">if</span> (n == 0) {
    <span style="color: #00ffff;">return</span> MedianSingle(b, m);
  }
  <span style="color: #00ffff;">if</span> (n == 1) {
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">case 1</span>
    <span style="color: #00ffff;">if</span> (m == 1) {
      <span style="color: #00ffff;">return</span> MedianOf2(a[0], b[0]);
    }
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">case 2 odd</span>
    <span style="color: #00ffff;">if</span> (m &amp; 1) {
      <span style="color: #00ffff;">return</span> MedianOf2(b[m/2], MedianOf3(a[0], b[m/2-1], b[m/2+1]));
    }
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">case 3 even</span>
    <span style="color: #00ffff;">return</span> MedianOf3(b[m/2], b[m/2-1], a[0]);
  } <span style="color: #00ffff;">else</span> <span style="color: #00ffff;">if</span> (n == 2) {
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">case 4</span>
    <span style="color: #00ffff;">if</span> (m == 2) {
      <span style="color: #00ffff;">return</span> MedianOf4(a[0], a[1], b[0], b[1]);
    }
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">case 5 odd</span>
    <span style="color: #00ffff;">if</span> (m &amp; 1) {
      <span style="color: #00ffff;">return</span> MedianOf3(b[m/2],
                       max(a[0], b[m/2-1]),
                       min(a[1], b[m/2+1]));
    }
    <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">case 6 even</span>
    <span style="color: #00ffff;">return</span> MedianOf4(b[m/2],
                     b[m/2-1],
                     max(a[0], b[m/2-2]),
                     min(a[1], b[m/2+1]));
  }
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">med_a</span> = (n - 1) / 2;
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">med_b</span> = (m - 1) / 2;
  <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">a[med_a, .], b[., med_b], subtract same value </span>
  <span style="color: #00ffff;">if</span> (a[med_a] &lt;= b[med_b]) {
    <span style="color: #00ffff;">return</span> FindMedianUtil(a+med_a, n - med_a , b, m - med_a);
  }
  <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">a[.,med_a], b[med_b, .], subtract same value </span>
  <span style="color: #00ffff;">return</span> FindMedianUtil(a, med_a+1, b+(n-(med_a+1)), m-(n-(med_a+1)));
}

<span style="color: #98fb98;">float</span> <span style="color: #87cefa;">FindMedian</span>(<span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">a</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">n</span>, <span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">b</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">m</span>) {
  <span style="color: #00ffff;">if</span> (n &gt; m) {
    <span style="color: #00ffff;">return</span> FindMedianUtil(b, m, a, n);
  }
  <span style="color: #00ffff;">return</span> FindMedianUtil(a, n, b, m);
}

<span style="color: #98fb98;">int</span> <span style="color: #87cefa;">main</span>() {
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">a</span>[] = {9, 12, 15, 900};
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">b</span>[] = {5, 8, 10, 20};
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">n</span> = <span style="color: #00ffff;">sizeof</span>(a) / <span style="color: #00ffff;">sizeof</span>(a[0]);
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">m</span> = <span style="color: #00ffff;">sizeof</span>(b) / <span style="color: #00ffff;">sizeof</span>(b[0]);

  cout &lt;&lt; FindMedian(a, n, b, m) &lt;&lt; endl;
  <span style="color: #00ffff;">return</span> 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">Random Selection</h2>
<div class="outline-text-2" id="text-5">
<p>
算法平均时间复杂度： O(n) 。
</p>

<div class="org-src-container">

<pre class="src src-c++"><span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">seed</span> = time(<span style="color: #7fffd4;">NULL</span>);
<span style="color: #98fb98;">int</span> <span style="color: #87cefa;">randint</span>(<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">m</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">n</span>) {
  <span style="color: #00ffff;">return</span> m + rand_r(&amp;seed) / (RAND_MAX / (n + 1 - m) + 1);
}

<span style="color: #98fb98;">void</span> <span style="color: #87cefa;">RandomSelectionK</span>(<span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">array</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">l</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">u</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">k</span>) {
  <span style="color: #00ffff;">if</span> (l &gt;= u) {
    <span style="color: #00ffff;">return</span>;
  }
  swap(array[l], array[randint(l, u)]);
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">pivot</span> = array[l];
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span> = l;
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">j</span> = u + 1;
  <span style="color: #00ffff;">while</span> (<span style="color: #7fffd4;">true</span>) {
    <span style="color: #00ffff;">do</span> {
      ++i;
    } <span style="color: #00ffff;">while</span> (i &lt;= u &amp;&amp; array[i] &lt; pivot);
    <span style="color: #00ffff;">do</span> {
      --j;
    } <span style="color: #00ffff;">while</span> (array[j] &gt; pivot);
    <span style="color: #00ffff;">if</span> (i &gt; j) {
      <span style="color: #00ffff;">break</span>;
    }
    swap(array[i], array[j]);
  }
  swap(array[l], array[j]);
  <span style="color: #00ffff;">if</span> (j &lt; k) {
    RandomSelectionK(array, j + 1, u, k);
  } <span style="color: #00ffff;">else</span> <span style="color: #00ffff;">if</span> (j &gt; k) {
    RandomSelectionK(array, l, j - 1, k);
  }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">BFPRT<sup><a id="fnr.1" name="fnr.1" class="footref" href="#fn.1">1</a></sup></h2>
<div class="outline-text-2" id="text-6">
<p>
在乱序数组中找寻中间元素，算法复杂度O(n).
</p>

<p>
算法刊登在<a href="http://people.csail.mit.edu/rivest/pubs/BFPRT73.pdf">Blum et al. (Tarjan)</a>。经常称为BFPRT，以论文作者最后名字这和组合而来。
</p>

<div class="org-src-container">

<pre class="src src-c++"><span style="color: #b0c4de;">#include</span> <span style="color: #ffa07a;">&lt;algorithm&gt;</span>
<span style="color: #00ffff;">using</span> <span style="color: #7fffd4;">std</span>::<span style="color: #98fb98;">swap</span>;

<span style="color: #98fb98;">void</span> <span style="color: #87cefa;">BubbleSort</span>(<span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">array</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">left</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">right</span>) {
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">bound</span> = right;
  <span style="color: #00ffff;">while</span> (1) {
    <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">tmp</span> = 0;
    <span style="color: #00ffff;">for</span> (<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span> = left; i &lt;= right; ++i) {
      <span style="color: #00ffff;">if</span> (array[i] &gt; array[i + 1]) {
        swap(array[i], array[i + 1]);
        tmp = i;
      }
    }
    <span style="color: #00ffff;">if</span> (tmp == 0) {
      <span style="color: #00ffff;">break</span>;
    }
    bound = tmp;
  }
}

<span style="color: #98fb98;">int</span> <span style="color: #87cefa;">FindMedian</span>(<span style="color: #98fb98;">int</span> *<span style="color: #eedd82;">array</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">left</span>, <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">right</span>) {
  <span style="color: #00ffff;">const</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">kGroupSize</span> = 5;
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">size</span> = right - left + 1;
  <span style="color: #00ffff;">if</span> (size &lt;= kGroupSize) {
    BubbleSort(array, left, right);
    <span style="color: #00ffff;">return</span> array[(size - 1) / 2 + 1];
  }
  <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">num_group</span> = (size - kGroupSize + 1) / kGroupSize;
  <span style="color: #00ffff;">for</span> (<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span> = 0; i &lt; num_group; ++i) {
    <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">sub_left</span> = left + kGroupSize * i;
    <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">sub_right</span> = sub_left + kGroupSize - 1;
    <span style="color: #00ffff;">if</span> (sub_right &gt; right) {
      sub_right = right;
    }
    BubbleSort(array, sub_left, sub_right);
    swap(array[left + i], array[(right + left - 1) / 2 + 1]);
  }
  <span style="color: #00ffff;">return</span> FindMedian(array, left, left + num_group - 1);
}
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7">Tournament Algorithm</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1">Find the second-largest element</h3>
<div class="outline-text-3" id="text-7-1">
<p>
算法复杂度O(n+logn);
</p>
</div>
</div>
<div id="outline-container-sec-7-2" class="outline-3">
<h3 id="sec-7-2">Find the k-largest element</h3>
<div class="outline-text-3" id="text-7-2">
<p>
算法复杂度O(n+klogn);
</p>
</div>
</div>
</div>
<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8">cc</h2>
<div class="outline-text-2" id="text-8">
<div class="org-src-container">

<pre class="src src-sh"></pre>
</div>

<p>
<del>INCLUDE: "./Files/" src c+</del>
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" name="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p class="footpara">
<a href="http://en.wikipedia.org/wiki/Median_of_medians">http://en.wikipedia.org/wiki/Median_of_medians</a>
</p></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: Shi Shougang</p>
<p class="date">Created: 2017-04-16 Sun 23:17</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
